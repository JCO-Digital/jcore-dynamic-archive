(()=>{var e,n={954:(e,n,r)=>{"use strict";const t=window.wp.blocks;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,n,r){return(n=function(e){var n=function(e){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}const s=window.wp.i18n,i=window.wp.element,c=window.wp.compose,l=window.wp.blockEditor,u=window.wp.primitives,d=window.ReactJSXRuntime,h=(0,d.jsxs)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,d.jsx)(u.Path,{d:"m19 7.5h-7.628c-.3089-.87389-1.1423-1.5-2.122-1.5-.97966 0-1.81309.62611-2.12197 1.5h-2.12803v1.5h2.12803c.30888.87389 1.14231 1.5 2.12197 1.5.9797 0 1.8131-.62611 2.122-1.5h7.628z"}),(0,d.jsx)(u.Path,{d:"m19 15h-2.128c-.3089-.8739-1.1423-1.5-2.122-1.5s-1.8131.6261-2.122 1.5h-7.628v1.5h7.628c.3089.8739 1.1423 1.5 2.122 1.5s1.8131-.6261 2.122-1.5h2.128z"})]}),p=(0,d.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(u.Path,{d:"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})}),m=(0,d.jsx)(u.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)(u.Path,{d:"M10 17.5H14V16H10V17.5ZM6 6V7.5H18V6H6ZM8 12.5H16V11H8V12.5Z"})});var f=r(833),g=r.n(f);const y=window.wp.serverSideRender;var v=r.n(y);const C=window.wp.components;function b({attributeName:e,checked:n,setAttributes:r,children:t,label:o}){return(0,d.jsxs)("div",{className:"jcore-toggle-component",children:[(0,d.jsx)(C.ToggleControl,{checked:n,onChange:n=>r({[e]:n}),label:o}),n&&t]})}const j=window.wp.hooks,w=window.wp.coreData;function x(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function F(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?x(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function _({taxonomySlug:e,onChange:n,value:r}){const[t,o]=(0,i.useState)([]),[a,c]=(0,i.useState)({}),[l,u]=(0,i.useState)(1),{taxonomy:h,loading:p}=function(e){const{record:n,isResolving:r}=(0,w.useEntityRecord)("root","taxonomy",e);return{taxonomy:n,loading:r}}(e),{taxonomyRecords:m,loading:f}=function(e,n={}){const r=(t=n,F(F({},{per_page:100}),t));var t;const{records:o,isResolving:a}=(0,w.useEntityRecords)("taxonomy",e,r);return{taxonomyRecords:o,loading:a}}(e,{per_page:100,page:l});return(0,i.useEffect)((()=>{if(m){const e=m.map((e=>e.id)),n={};console.log(m),m.forEach((e=>{n[e.id]={slug:e.slug,name:e.name}})),o(e),c(n)}}),[m]),(0,d.jsxs)(C.Flex,{children:[(0,d.jsx)(C.FlexBlock,{children:(0,d.jsx)(C.FormTokenField,{__experimentalExpandOnFocus:!0,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,displayTransform:e=>a[e]?a[e].name:e,saveTransform:e=>e+"",suggestions:t,value:r,onChange:n,label:`${(0,s.sprintf)((0,s._x)("Show only items with selected: %s","Taxonomy","jcore-dynamic-archive"),h.name)}`})}),(p||f)&&(0,d.jsx)(C.FlexItem,{children:(0,d.jsx)(C.Spinner,{})})]})}function O(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function S(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?O(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}g()("dynamic-archive:Edit");const P=JSON.parse('{"UU":"jcore/dynamic-archive"}');(0,t.registerBlockType)(P.UU,{edit:function e({attributes:n,setAttributes:r}){const{postType:t,perPage:o,columns:a,masonryGrid:u,showPagination:f,infiniteScroll:g,sticky:y,filterTypes:x,filterTypesChild:F,forcedCategories:O,taxonomies:P,hierarchicalFilter:k}=n,E=(0,c.useInstanceId)(e);r({instanceId:E.toString()});const{postTypes:T,loading:I}=function(e={per_page:100}){const{isResolving:n,records:r}=(0,w.useEntityRecords)("root","postType",e),[t,o]=(0,i.useState)([]),a=(0,j.applyFilters)("dynamicArchive.forbiddenPostTypes",["attachment"]);return(0,i.useEffect)((()=>{r&&o(r.filter((e=>e.viewable&&!a.includes(e.slug))))}),[r]),{postTypes:t,loading:n}}(),A=function(){const[e,n]=(0,i.useState)(5),[r]=(0,w.useEntityProp)("root","site","posts_per_page");return(0,i.useEffect)((()=>{void 0!==r&&n(r)}),[r]),e}();(0,i.useEffect)((()=>{n.perPage||r({perPage:A})}),[A]);const{order:M,orderBy:D}=n,R=[{label:(0,s.__)("Ascending","jcore-dynamic-archive"),value:"ASC"},{label:(0,s.__)("Descending","jcore-dynamic-archive"),value:"DESC"}],N=[{label:(0,s.__)("Date","jcore-dynamic-archive"),value:"date"},{label:(0,s.__)("Title","jcore-dynamic-archive"),value:"title"},{label:(0,s.__)("Modified","jcore-dynamic-archive"),value:"modified"},{label:(0,s.__)("Author","jcore-dynamic-archive"),value:"author"},{label:(0,s.__)("ID","jcore-dynamic-archive"),value:"ID"},{label:(0,s.__)("Menu order","jcore-dynamic-archive"),value:"menu_order"}],[B,z]=(0,i.useState)([]),{taxonomies:V,loading:H}=function(e){const n={per_page:-1};e&&(n.type=e);const{records:r,isResolving:t}=(0,w.useEntityRecords)("root","taxonomy",n);return{taxonomies:r,loading:t}}(t);(0,i.useEffect)((()=>{if(V){const e=V.map((e=>({label:e.name,value:e.slug,id:e.slug,hierarchical:e.hierarchical})));z(null!=e?e:[]);const n=P.filter((n=>e.map((e=>e.value)).includes(n)));r({taxonomies:n})}else z([])}),[V]);const G=[{label:(0,s.__)("Checkbox","jcore-dynamic-archive"),value:"checkbox"},{label:(0,s.__)("Radio","jcore-dynamic-archive"),value:"radio"},{label:(0,s.__)("Dropdown","jcore-dynamic-archive"),value:"dropdown"}];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(l.InspectorControls,{children:[(0,d.jsxs)(C.PanelBody,{title:(0,s.__)("Settings","jcore-dynamic-archive"),icon:I?(0,d.jsx)(C.Spinner,{size:5}):h,children:[(0,d.jsxs)(C.Flex,{children:[(0,d.jsx)(C.FlexBlock,{children:(0,d.jsx)(C.SelectControl,{label:(0,s.__)("Post Type","jcore-dynamic-archive"),value:t,options:T.map((e=>({label:e.name,value:e.slug}))),onChange:e=>r({postType:e})})}),(0,d.jsx)(C.FlexItem,{children:I&&(0,d.jsx)(C.Spinner,{})})]}),(0,d.jsx)(b,{label:(0,s.__)("Show pagination","jcore-dynamic-archive"),checked:f,setAttributes:r,attributeName:"showPagination",children:(0,d.jsx)(C.ToggleControl,{label:(0,s.__)("Infinite scroll","jcore-dynamic-archive"),checked:g,onChange:e=>r({infiniteScroll:e})})}),(0,d.jsx)(C.SelectControl,{label:(0,s.__)("Order","jcore-dynamic-archive"),value:M,options:R,onChange:e=>r({order:e})}),(0,d.jsx)(C.SelectControl,{label:(0,s.__)("Order by","jcore-dynamic-archive"),value:D,options:N,onChange:e=>r({orderBy:e})}),"post"===t&&(0,d.jsx)(C.SelectControl,{label:(0,s.__)("Sticky post behavior","jcore-dynamic-archive"),options:[{label:(0,s.__)("Include","jcore-dynamic-archive"),value:"include"},{label:(0,s.__)("Exclude","jcore-dynamic-archive"),value:"exclude"},{label:(0,s.__)("Only","jcore-dynamic-archive"),value:"only"}],onChange:e=>r({sticky:e}),value:y})]}),(0,d.jsxs)(C.PanelBody,{title:(0,s.__)("Layout","jcore-dynamic-archive"),icon:p,children:[(0,d.jsx)(C.ToggleControl,{label:(0,s.__)("Masonry Grid","jcore-dynamic-archive"),checked:u,onChange:e=>r({masonryGrid:e})}),(0,d.jsx)(C.RangeControl,{label:(0,s.__)("Columns","jcore-dynamic-archive"),value:a||3,onChange:e=>{isNaN(parseInt(e))||r({columns:parseInt(e)})},min:1,max:4}),(0,d.jsx)(C.TextControl,{label:(0,s.__)("Posts per Page","jcore-dynamic-archive"),value:o||A,onChange:e=>{isNaN(parseInt(e))||r({perPage:parseInt(e)})},type:"number",min:1,max:100})]}),(0,d.jsx)(C.PanelBody,{title:(0,s.__)("Filters","jcore-dynamic-archive"),icon:H?(0,d.jsx)(C.Spinner,{size:5}):m,children:!H&&(0,d.jsxs)(d.Fragment,{children:[B.length>0&&(0,d.jsx)("p",{children:"Filters to show"}),0===B.length&&(0,d.jsx)("p",{children:"No filters available for selected post type"}),B.map((e=>{var n;return(0,d.jsxs)("div",{className:"jcore-taxonomy-item",children:[(0,d.jsx)(C.CheckboxControl,{label:(0,s.__)(e.label,"jcore-dynamic-archive"),checked:P.includes(e.value),onChange:n=>r({taxonomies:P.includes(e.value)?P.filter((n=>n!==e.value)):[...P,e.value]})}),P.includes(e.value)&&(0,d.jsxs)(d.Fragment,{children:[e.hierarchical&&(0,d.jsx)(C.ToggleControl,{label:(0,s.__)("Hierarchical filter","jcore-dynamic-archive"),help:(0,s.__)("If enabled, child categories will be hidden until parent category is selected","jcore-dynamic-archive"),checked:null!==(n=k[e.value])&&void 0!==n&&n,onChange:n=>r({hierarchicalFilter:S(S({},k),{},{[e.value]:n})})}),(0,d.jsx)(C.SelectControl,{label:k[e.value]?(0,s.__)("Filter type (Parent categories)","jcore-dynamic-archive"):(0,s.__)("Filter type","jcore-dynamic-archive"),value:x[e.value],options:G,onChange:n=>{r({filterTypes:S(S({},x),{},{[e.value]:n})})}}),k[e.value]&&(0,d.jsx)(C.SelectControl,{label:(0,s.__)("Filter type (Child categories)","jcore-dynamic-archive"),value:F[e.value],options:G,onChange:n=>{r({filterTypesChild:S(S({},F),{},{[e.value]:n})})}}),(0,d.jsx)(_,{taxonomySlug:e.value,onChange:n=>r({forcedCategories:S(S({},O),{},{[e.value]:n})}),value:O[e.value]})]})]},e.id)}))]})})]}),(0,d.jsx)("div",S(S({},(0,l.useBlockProps)()),{},{children:(0,d.jsx)(v(),{block:"jcore/dynamic-archive",attributes:n,httpMethod:"POST"})}))]})},save:()=>null})},833:(e,n,r)=>{n.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;n.splice(1,0,r,"color: inherit");let t=0,o=0;n[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(t++,"%c"===e&&(o=t))})),n.splice(o,0,r)},n.save=function(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(e){}},n.load=function(){let e;try{e=n.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},n.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage=function(){try{return localStorage}catch(e){}}(),n.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.log=console.debug||console.log||(()=>{}),e.exports=r(736)(n);const{formatters:t}=e.exports;t.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},736:(e,n,r)=>{e.exports=function(e){function n(e){let r,o,a,s=null;function i(...e){if(!i.enabled)return;const t=i,o=Number(new Date),a=o-(r||o);t.diff=a,t.prev=r,t.curr=o,r=o,e[0]=n.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,o)=>{if("%%"===r)return"%";s++;const a=n.formatters[o];if("function"==typeof a){const n=e[s];r=a.call(t,n),e.splice(s,1),s--}return r})),n.formatArgs.call(t,e),(t.log||n.log).apply(t,e)}return i.namespace=e,i.useColors=n.useColors(),i.color=n.selectColor(e),i.extend=t,i.destroy=n.destroy,Object.defineProperty(i,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(o!==n.namespaces&&(o=n.namespaces,a=n.enabled(e)),a),set:e=>{s=e}}),"function"==typeof n.init&&n.init(i),i}function t(e,r){const t=n(this.namespace+(void 0===r?":":r)+e);return t.log=this.log,t}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){const e=[...n.names.map(o),...n.skips.map(o).map((e=>"-"+e))].join(",");return n.enable(""),e},n.enable=function(e){let r;n.save(e),n.namespaces=e,n.names=[],n.skips=[];const t=("string"==typeof e?e:"").split(/[\s,]+/),o=t.length;for(r=0;r<o;r++)t[r]&&("-"===(e=t[r].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.slice(1)+"$")):n.names.push(new RegExp("^"+e+"$")))},n.enabled=function(e){if("*"===e[e.length-1])return!0;let r,t;for(r=0,t=n.skips.length;r<t;r++)if(n.skips[r].test(e))return!1;for(r=0,t=n.names.length;r<t;r++)if(n.names[r].test(e))return!0;return!1},n.humanize=r(585),n.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{n[r]=e[r]})),n.names=[],n.skips=[],n.formatters={},n.selectColor=function(e){let r=0;for(let n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n),r|=0;return n.colors[Math.abs(r)%n.colors.length]},n.enable(n.load()),n}},585:e=>{var n=1e3,r=60*n,t=60*r,o=24*t,a=7*o;function s(e,n,r,t){var o=n>=1.5*r;return Math.round(e/r)+" "+t+(o?"s":"")}e.exports=function(e,i){i=i||{};var c,l,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(s){var i=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"weeks":case"week":case"w":return i*a;case"days":case"day":case"d":return i*o;case"hours":case"hour":case"hrs":case"hr":case"h":return i*t;case"minutes":case"minute":case"mins":case"min":case"m":return i*r;case"seconds":case"second":case"secs":case"sec":case"s":return i*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(e);if("number"===u&&isFinite(e))return i.long?(c=e,(l=Math.abs(c))>=o?s(c,l,o,"day"):l>=t?s(c,l,t,"hour"):l>=r?s(c,l,r,"minute"):l>=n?s(c,l,n,"second"):c+" ms"):function(e){var a=Math.abs(e);return a>=o?Math.round(e/o)+"d":a>=t?Math.round(e/t)+"h":a>=r?Math.round(e/r)+"m":a>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}},r={};function t(e){var o=r[e];if(void 0!==o)return o.exports;var a=r[e]={exports:{}};return n[e](a,a.exports,t),a.exports}t.m=n,e=[],t.O=(n,r,o,a)=>{if(!r){var s=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],a=e[u][2];for(var i=!0,c=0;c<r.length;c++)(!1&a||s>=a)&&Object.keys(t.O).every((e=>t.O[e](r[c])))?r.splice(c--,1):(i=!1,a<s&&(s=a));if(i){e.splice(u--,1);var l=o();void 0!==l&&(n=l)}}return n}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,o,a]},t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={818:0,854:0};t.O.j=n=>0===e[n];var n=(n,r)=>{var o,a,s=r[0],i=r[1],c=r[2],l=0;if(s.some((n=>0!==e[n]))){for(o in i)t.o(i,o)&&(t.m[o]=i[o]);if(c)var u=c(t)}for(n&&n(r);l<s.length;l++)a=s[l],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(u)},r=self.webpackChunkdynamic_archive=self.webpackChunkdynamic_archive||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))})();var o=t.O(void 0,[854],(()=>t(954)));o=t.O(o)})();