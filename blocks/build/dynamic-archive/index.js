(()=>{"use strict";var e,r={954:(e,r,n)=>{const o=window.wp.blocks;function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function i(e,r,n){return(r=function(e){var r=function(e){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}const a=window.wp.i18n,c=window.wp.element,l=window.wp.compose,s=window.wp.blockEditor,d=window.wp.primitives,u=window.ReactJSXRuntime,h=(0,u.jsxs)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,u.jsx)(d.Path,{d:"m19 7.5h-7.628c-.3089-.87389-1.1423-1.5-2.122-1.5-.97966 0-1.81309.62611-2.12197 1.5h-2.12803v1.5h2.12803c.30888.87389 1.14231 1.5 2.12197 1.5.9797 0 1.8131-.62611 2.122-1.5h7.628z"}),(0,u.jsx)(d.Path,{d:"m19 15h-2.128c-.3089-.8739-1.1423-1.5-2.122-1.5s-1.8131.6261-2.122 1.5h-7.628v1.5h7.628c.3089.8739 1.1423 1.5 2.122 1.5s1.8131-.6261 2.122-1.5h2.128z"})]}),p=(0,u.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,u.jsx)(d.Path,{d:"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})}),v=(0,u.jsx)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)(d.Path,{d:"M10 17.5H14V16H10V17.5ZM6 6V7.5H18V6H6ZM8 12.5H16V11H8V12.5Z"})}),y=window.wp.serverSideRender;var m=n.n(y);const j=window.wp.components;function b({attributeName:e,checked:r,setAttributes:n,children:o,label:t}){return(0,u.jsxs)("div",{className:"jcore-toggle-component",children:[(0,u.jsx)(j.ToggleControl,{checked:r,onChange:r=>n({[e]:r}),label:t}),r&&o]})}const g=window.wp.hooks,f=window.wp.coreData;function x(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,o)}return n}function _(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?x(Object(n),!0).forEach((function(r){i(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function w({taxonomySlug:e,onChange:r,value:n}){const[o,t]=(0,c.useState)([]),[i,l]=(0,c.useState)(1),{taxonomy:s,loading:d}=function(e){const{record:r,isResolving:n}=(0,f.useEntityRecord)("root","taxonomy",e);return{taxonomy:r,loading:n}}(e),{taxonomyRecords:h,loading:p}=function(e,r={}){const n=(o=r,_(_({},{per_page:100}),o));var o;const{records:t,isResolving:i}=(0,f.useEntityRecords)("taxonomy",e,n);return{taxonomyRecords:t,loading:i}}(e,{per_page:100,page:i});return(0,c.useEffect)((()=>{if(h){const e=h.map((e=>e.slug));t(e)}}),[h]),(0,u.jsxs)(j.Flex,{children:[(0,u.jsx)(j.FlexBlock,{children:(0,u.jsx)(j.FormTokenField,{__experimentalExpandOnFocus:!0,__next40pxDefaultSize:!0,suggestions:o,value:n,onChange:r,label:`${(0,a.sprintf)((0,a._x)("Show only items with selected: %s","Taxonomy","jcore-dynamic-archive"),s.name)}`})}),(d||p)&&(0,u.jsx)(j.FlexItem,{children:(0,u.jsx)(j.Spinner,{})})]})}function O(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,o)}return n}function S(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?O(Object(n),!0).forEach((function(r){i(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}const P=JSON.parse('{"UU":"jcore/dynamic-archive"}');(0,o.registerBlockType)(P.UU,{edit:function e({attributes:r,setAttributes:n}){const{postType:o,perPage:t,columns:i,masonryGrid:d,showPagination:y,infiniteScroll:x,sticky:_,filterTypes:O,forcedCategories:P,taxonomies:C,hierarchicalFilter:k}=r,E=(0,l.useInstanceId)(e);n({instanceId:E.toString()});const{postTypes:T,loading:F}=function(e={per_page:100}){const{isResolving:r,records:n}=(0,f.useEntityRecords)("root","postType",e),[o,t]=(0,c.useState)([]),i=(0,g.applyFilters)("dynamicArchive.forbiddenPostTypes",["attachment"]);return(0,c.useEffect)((()=>{n&&t(n.filter((e=>e.viewable&&!i.includes(e.slug))))}),[n]),{postTypes:o,loading:r}}(),D=function(){const[e,r]=(0,c.useState)(5),[n]=(0,f.useEntityProp)("root","site","posts_per_page");return(0,c.useEffect)((()=>{void 0!==n&&r(n)}),[n]),e}();(0,c.useEffect)((()=>{r.perPage||n({perPage:D})}),[D]);const{order:I,orderBy:R}=r,B=[{label:(0,a.__)("Ascending","jcore-dynamic-archive"),value:"ASC"},{label:(0,a.__)("Descending","jcore-dynamic-archive"),value:"DESC"}],V=[{label:(0,a.__)("Date","jcore-dynamic-archive"),value:"date"},{label:(0,a.__)("Title","jcore-dynamic-archive"),value:"title"},{label:(0,a.__)("Modified","jcore-dynamic-archive"),value:"modified"},{label:(0,a.__)("Author","jcore-dynamic-archive"),value:"author"},{label:(0,a.__)("ID","jcore-dynamic-archive"),value:"ID"},{label:(0,a.__)("Menu order","jcore-dynamic-archive"),value:"menu_order"}],[H,M]=(0,c.useState)([]),{taxonomies:N,loading:z}=function(e){const r={per_page:-1};e&&(r.type=e);const{records:n,isResolving:o}=(0,f.useEntityRecords)("root","taxonomy",r);return{taxonomies:n,loading:o}}(o);(0,c.useEffect)((()=>{if(N){const e=N.map((e=>({label:e.name,value:e.slug,id:e.id})));M(null!=e?e:[]);const r=C.filter((r=>e.map((e=>e.value)).includes(r)));n({taxonomies:r})}else M([])}),[N]);const A=[{label:(0,a.__)("Checkbox","jcore-dynamic-archive"),value:"checkbox"},{label:(0,a.__)("Radio","jcore-dynamic-archive"),value:"radio"},{label:(0,a.__)("Dropdown","jcore-dynamic-archive"),value:"dropdown"}];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(s.InspectorControls,{children:[(0,u.jsxs)(j.PanelBody,{title:(0,a.__)("Settings","jcore-dynamic-archive"),icon:F?(0,u.jsx)(j.Spinner,{size:5}):h,children:[(0,u.jsxs)(j.Flex,{children:[(0,u.jsx)(j.FlexBlock,{children:(0,u.jsx)(j.SelectControl,{label:(0,a.__)("Post Type","jcore-dynamic-archive"),value:o,options:T.map((e=>({label:e.name,value:e.slug}))),onChange:e=>n({postType:e})})}),(0,u.jsx)(j.FlexItem,{children:F&&(0,u.jsx)(j.Spinner,{})})]}),(0,u.jsx)(b,{label:(0,a.__)("Show pagination","jcore-dynamic-archive"),checked:y,setAttributes:n,attributeName:"showPagination",children:(0,u.jsx)(j.ToggleControl,{label:(0,a.__)("Infinite scroll","jcore-dynamic-archive"),checked:x,onChange:e=>n({infiniteScroll:e})})}),(0,u.jsx)(j.SelectControl,{label:(0,a.__)("Order","jcore-dynamic-archive"),value:I,options:B,onChange:e=>n({order:e})}),(0,u.jsx)(j.SelectControl,{label:(0,a.__)("Order by","jcore-dynamic-archive"),value:R,options:V,onChange:e=>n({orderBy:e})}),"post"===o&&(0,u.jsx)(j.SelectControl,{label:(0,a.__)("Sticky post behavior","jcore-dynamic-archive"),options:[{label:(0,a.__)("Include","jcore-dynamic-archive"),value:"include"},{label:(0,a.__)("Exclude","jcore-dynamic-archive"),value:"exclude"},{label:(0,a.__)("Only","jcore-dynamic-archive"),value:"only"}],onChange:e=>n({sticky:e}),value:_})]}),(0,u.jsxs)(j.PanelBody,{title:(0,a.__)("Layout","jcore-dynamic-archive"),icon:p,children:[(0,u.jsx)(j.ToggleControl,{label:(0,a.__)("Masonry Grid","jcore-dynamic-archive"),checked:d,onChange:e=>n({masonryGrid:e})}),(0,u.jsx)(j.RangeControl,{label:(0,a.__)("Columns","jcore-dynamic-archive"),value:i||3,onChange:e=>{isNaN(parseInt(e))||n({columns:parseInt(e)})},min:1,max:4}),(0,u.jsx)(j.TextControl,{label:(0,a.__)("Posts per Page","jcore-dynamic-archive"),value:t||D,onChange:e=>{isNaN(parseInt(e))||n({perPage:parseInt(e)})},type:"number",min:1,max:100})]}),(0,u.jsx)(j.PanelBody,{title:(0,a.__)("Filters","jcore-dynamic-archive"),icon:z?(0,u.jsx)(j.Spinner,{size:5}):v,children:!z&&(0,u.jsxs)(u.Fragment,{children:[H.length>0&&(0,u.jsx)("p",{children:"Filters to show"}),0===H.length&&(0,u.jsx)("p",{children:"No filters available for selected post type"}),H.map((e=>(0,u.jsxs)("div",{className:"jcore-taxonomy-item",children:[(0,u.jsx)(j.CheckboxControl,{label:(0,a.__)(e.label,"jcore-dynamic-archive"),checked:C.includes(e.value),onChange:r=>n({taxonomies:C.includes(e.value)?C.filter((r=>r!==e.value)):[...C,e.value]})}),C.includes(e.value)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.ToggleControl,{label:(0,a.__)("Hierarchical filter","jcore-dynamic-archive"),help:(0,a.__)("If enabled, child categories will be hidden until parent category is selected","jcore-dynamic-archive"),checked:k[e.value],onChange:r=>n({hierarchicalFilter:S(S({},k),{},{[e.value]:r})})}),(0,u.jsx)(j.SelectControl,{label:(0,a.__)("Filter type","jcore-dynamic-archive"),value:O[e.value],options:A,onChange:r=>{n({filterTypes:S(S({},O),{},{[e.value]:r})})}}),(0,u.jsx)(w,{taxonomySlug:e.value,onChange:r=>n({forcedCategories:S(S({},P),{},{[e.value]:r})}),value:P[e.value]})]})]},e.id)))]})})]}),(0,u.jsx)("div",S(S({},(0,s.useBlockProps)()),{},{children:(0,u.jsx)(m(),{block:"jcore/dynamic-archive",attributes:r,httpMethod:"POST"})}))]})},save:()=>null})}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}};return r[e](i,i.exports,o),i.exports}o.m=r,e=[],o.O=(r,n,t,i)=>{if(!n){var a=1/0;for(d=0;d<e.length;d++){n=e[d][0],t=e[d][1],i=e[d][2];for(var c=!0,l=0;l<n.length;l++)(!1&i||a>=i)&&Object.keys(o.O).every((e=>o.O[e](n[l])))?n.splice(l--,1):(c=!1,i<a&&(a=i));if(c){e.splice(d--,1);var s=t();void 0!==s&&(r=s)}}return r}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,t,i]},o.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return o.d(r,{a:r}),r},o.d=(e,r)=>{for(var n in r)o.o(r,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e={818:0,854:0};o.O.j=r=>0===e[r];var r=(r,n)=>{var t,i,a=n[0],c=n[1],l=n[2],s=0;if(a.some((r=>0!==e[r]))){for(t in c)o.o(c,t)&&(o.m[t]=c[t]);if(l)var d=l(o)}for(r&&r(n);s<a.length;s++)i=a[s],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},n=self.webpackChunkdynamic_archive=self.webpackChunkdynamic_archive||[];n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n))})();var t=o.O(void 0,[854],(()=>o(954)));t=o.O(t)})();